!function(e){e.fn.relCopy=function(t){var n=jQuery.extend({excludeSelector:".exclude",emptySelector:".empty",copyClass:"copy",append:"",appendTo:"",clearInputs:!0,withDataAndEvents:!0,limit:0,onLimitExceeded:null,onCopy:null},t);return n.limit=parseInt(n.limit),this.each(function(){e(this).click(function(){var t=this,i=e(t).attr("rel"),a=e(i).length;if(0!=n.limit&&a>=n.limit)return"function"==typeof n.onLimitExceeded&&n.onLimitExceeded.call(t),!1;var c=e(i+":first"),p=e(c).parent(),d=e(c).clone(n.withDataAndEvents).addClass(n.copyClass+a);if(n.excludeSelector&&e(d).find(n.excludeSelector).remove(),n.appendTo&&e(d).find(n.appendTo).length?e(d).find(n.appendTo).append(n.append):e(d).append(n.append),n.emptySelector&&e(d).find(n.emptySelector).empty(),e(d).attr("id")){var r=e(d).attr("id").replace(/\d+$/,"")+(a+1);e(d).attr("id",r)}return e(d).find("[id]").each(function(){var t=e(this).attr("id").replace(/\d+$/,"")+(a+1);e(this).attr("id",t)}),n.clearInputs&&e(d).find(":input").each(function(){switch(e(this).attr("type")){case"button":case"reset":case"submit":break;case"checkbox":e(this).prop("checked",!1);break;default:e(this).val("")}}),e(p).find(i+":last").after(d),"function"==typeof n.onCopy&&n.onCopy.call(t,d),!1})}),this}}(jQuery);